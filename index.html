
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel - Findemarkt24</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #121212; color: white; }
    .card { background: #1e1e1e; padding: 20px; margin: 10px 0; border-radius: 8px; }
    input, button { padding: 8px; margin: 5px 0; }
  </style>
</head>
<body>
  <h1>Admin Panel</h1>
  <form id="addForm">
    <input type="text" id="title" placeholder="İlan Başlığı" required />
    <input type="text" id="user" placeholder="Kullanıcı" required />
    <button type="submit">Ekle</button>
  </form>
  <div id="ilanlar"></div>
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

    const supabaseUrl = 'https://jgrcnbkovfkpgfcpwfxf.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ...'; // Kısaltıldı
    const supabase = createClient(supabaseUrl, supabaseKey);

    const form = document.getElementById("addForm");
    const ilanlarDiv = document.getElementById("ilanlar");

    form.onsubmit = async (e) => {
      e.preventDefault();
      const title = document.getElementById("title").value;
      const user = document.getElementById("user").value;
      await supabase.from("ilanlar").insert([{ title, user, status: "Bekliyor" }]);
      form.reset();
      loadIlanlar();
    };

    async function loadIlanlar() {
      const { data } = await supabase.from("ilanlar").select("*").order("id", { ascending: false });
      ilanlarDiv.innerHTML = "";
      data.forEach(ilan => {
        ilanlarDiv.innerHTML += `
          <div class="card">
            <strong>İlan:</strong> ${ilan.title}<br/>
            <strong>Kullanıcı:</strong> ${ilan.user}<br/>
            <strong>Durum:</strong> ${ilan.status}<br/>
          </div>`;
      });
    }

    loadIlanlar();
  </script>
</body>
</html>
